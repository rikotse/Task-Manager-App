<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Task Manager</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="app-container">
      <header class="app-header">
        <div class="header-content">
          <h1><i class="fas fa-tasks"></i> My Task Manager</h1>
          <div class="header-actions">
            <button
              id="themeToggle"
              class="theme-toggle"
              aria-label="Toggle dark mode"
            >
              <i class="fas fa-moon"></i>
            </button>
          </div>
        </div>
      </header>

      <main class="main-content">
        <section class="task-input-section">
          <div class="section-header">
            <h2>Add New Task</h2>
          </div>
          <form
            class="task-form"
            id="taskForm"
            aria-label="Add a new task"
            onsubmit="event.preventDefault(); addTask();"
          >
            <div class="input-group">
              <label for="taskInput" class="visually-hidden"
                >Task Description</label
              >
              <input
                type="text"
                id="taskInput"
                placeholder="What do you need to do?"
                required
              />
              <span class="input-icon"><i class="fas fa-pencil-alt"></i></span>
            </div>

            <div class="form-row">
              <div class="input-group">
                <label for="dueDateInput" class="visually-hidden"
                  >Due Date</label
                >
                <input type="date" id="dueDateInput" />
                <span class="input-icon"><i class="far fa-calendar"></i></span>
              </div>

              <div class="input-group">
                <label for="dueTimeInput" class="visually-hidden"
                  >Due Time</label
                >
                <input type="time" id="dueTimeInput" />
                <span class="input-icon"><i class="far fa-clock"></i></span>
              </div>

              <div class="input-group">
                <label for="priorityInput" class="visually-hidden"
                  >Priority</label
                >
                <select id="priorityInput">
                  <option value="low">ðŸŸ¢ Low</option>
                  <option value="medium" selected>ðŸŸ¡ Medium</option>
                  <option value="high">ðŸ”´ High</option>
                </select>
                <span class="input-icon"><i class="fas fa-flag"></i></span>
              </div>
            </div>

            <button type="submit" id="addTaskBtn" class="primary-btn">
              <i class="fas fa-plus"></i> Add Task
            </button>
          </form>
        </section>

        <section class="filter-section">
          <div class="section-header">
            <h2>Filter Tasks</h2>
          </div>
          <div class="filter-group" role="group" aria-label="Filter tasks">
            <button
              type="button"
              class="filter-btn active"
              onclick="filterTasks('all')"
              aria-pressed="true"
            >
              <i class="fas fa-layer-group"></i> All
            </button>
            <button
              type="button"
              class="filter-btn"
              onclick="filterTasks('active')"
              aria-pressed="false"
            >
              <i class="fas fa-circle"></i> Active
            </button>
            <button
              type="button"
              class="filter-btn"
              onclick="filterTasks('completed')"
              aria-pressed="false"
            >
              <i class="fas fa-check-circle"></i> Completed
            </button>
          </div>

          <div class="date-filter">
            <div class="input-group">
              <label for="filterDate"
                ><i class="far fa-calendar-alt"></i> View tasks for:</label
              >
              <input type="date" id="filterDate" />
              <button
                type="button"
                onclick="clearDateFilter()"
                class="secondary-btn"
              >
                Clear
              </button>
            </div>
          </div>
        </section>

        <section class="tasks-section">
          <div class="section-header">
            <h2>Your Tasks</h2>
            <span id="taskCount" class="badge">0 tasks</span>
          </div>
          <div
            class="task-list"
            id="taskList"
            aria-live="polite"
            aria-relevant="additions"
          >
            <!-- Tasks will appear here -->
          </div>
        </section>

        <section class="calendar-section">
          <div class="section-header">
            <h2><i class="far fa-calendar"></i> Weekly Overview</h2>
          </div>
          <div class="calendar-grid" id="calendarGrid">
            <!-- 7 columns: Sun to Sat -->
          </div>
        </section>

        <section class="date-view-section">
          <div class="section-header">
            <h2><i class="fas fa-search"></i> Tasks by Date</h2>
          </div>
          <div class="input-group">
            <input type="date" id="datePicker" />
          </div>
          <div id="dateTasksList" class="date-task-list" aria-live="polite">
            <!-- Filtered tasks will appear here -->
          </div>
        </section>
      </main>

      <div id="notificationArea" class="notification-area"></div>
      <div id="errorMessage" class="error-message"></div>
    </div>

    <noscript>
      Your browser does not support JavaScript or it is disabled.
    </noscript>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
  </body>
</html>
